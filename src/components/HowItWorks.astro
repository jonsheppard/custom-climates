---
// src/components/HowItWorks.astro

const steps = [
  {
    title: "Step 1",
    subtitle: "Book Your Consultation",
    description: "Tell us your materials, location, and timeline. 5-minute call or online form. Don't see what you need? Let's talk custom specs.",
    icon: "phone",
    link: "/contact"
  },
  {
    title: "Step 2", 
    subtitle: "Choose Unit & Dates",
    description: "Trailer or conex, size and spec. We lock in delivery, quote, and monitoring plan. We'll walk you through pricing and options with no surprises.",
    icon: "truck",
    link: "/equipment"
  },
  {
    title: "Step 3",
    subtitle: "We Deliver & Monitor", 
    description: "Unit rolls in, powers up, and streams live data; our team babysits the climate so you don't have to. Zero delays, zero reorders, and one very happy General Contractor.",
    icon: "monitor",
    link: "/contact"
  }
];

const getIcon = (iconType: string) => {
  switch(iconType) {
    case 'phone':
      return `<svg class="w-10 h-10 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" />
      </svg>`;
    case 'truck':
      return `<svg class="w-10 h-10 text-gray-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12" />
      </svg>`;
    case 'monitor':
      return `<svg class="w-10 h-10 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 1.5H8.25A2.25 2.25 0 006 3.75v16.5a2.25 2.25 0 002.25 2.25h7.5A2.25 2.25 0 0018 20.25V3.75a2.25 2.25 0 00-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3" />
      </svg>`;
    default:
      return '';
  }
};
---
<section class="bg-gray-100 dark:bg-gray-800 py-20 px-8">
  <div style="width: 100%; max-width: 80rem; margin: 0 auto; padding-left: 1rem; padding-right: 1rem; text-align: center;">
    <h2 class="text-4xl font-bold mb-4 text-gray-900 dark:text-white" style="line-height: 1.5;">From Phone Call to Climate Control in Three Simple Moves</h2>
    <p class="text-xl text-gray-600 dark:text-gray-300 mb-16 italic">ready, set, ship</p>
    <div class="relative max-w-5xl mx-auto">
      <!-- The connecting line -->
      <div class="hidden md:block absolute top-10 left-0 w-full h-0.5 bg-gray-300 dark:bg-gray-600"></div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-12 relative">
        {steps.map((step) => (
          <div class="text-center z-10">
            <div class="flex items-center justify-center w-20 h-20 mx-auto mb-6 bg-white dark:bg-gray-700 p-3 rounded-full shadow-lg border-4 border-gray-100 dark:border-gray-800 hover:border-[#0955A9] transition-colors duration-300">
                <div set:html={getIcon(step.icon)} />
            </div>
            <h3 class="text-xl font-bold mb-2 text-gray-900 dark:text-white" style="line-height: 1.4;">{step.title}</h3>
            <h4 class="text-lg font-semibold mb-3 text-[#0955A9] dark:text-sky-400">
              <a href={step.link} class="hover:underline transition-all duration-300">{step.subtitle}</a>
            </h4>
            <p class="text-gray-600 dark:text-gray-400 px-2">{step.description}</p>
          </div>
        ))}
      </div>
    </div>
  </div>
</section> 