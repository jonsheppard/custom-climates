---
import Layout from '../layouts/Layout.astro';

const title = "Request a Consultation | Custom Climates";
const description = "Request a consultation for a custom climate-controlled trailer solution tailored to your needs.";
---

<Layout {title} {description}>
  <main class="bg-gray-50 text-gray-900">
    <div class="pt-16 pb-6 px-8 text-center">
      <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl sm:text-4xl md:text-5xl font-extrabold mb-4 px-4 text-gray-900" style="line-height: 1.2;">Don't Let Weather Wreck Your Schedule</h1>
          <p class="text-lg text-gray-600 mb-6 max-w-3xl mx-auto">
            One quick quote today saves you weeks of rework and thousands in damaged materials tomorrow. Fill out the form below and we'll get back to you with pricing tailored to your project.
          </p>
        </div>
      </div>
    </div>

    <div class="pb-12 px-8">
      <form name="contact" method="POST" data-netlify="true" data-netlify-honeypot="bot-field" class="max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-lg border border-gray-200">
      <input type="hidden" name="form-name" value="contact" />
      <p class="hidden">
        <label>Don't fill this out if you're human: <input name="bot-field" /></label>
      </p>

      <div class="grid grid-cols-1 gap-6">
        <div>
          <label for="full-name" class="block text-gray-700 mb-2">Full Name *</label>
          <input type="text" name="full-name" id="full-name" placeholder="Your Full Name" class="w-full p-3 rounded bg-white border border-gray-300 focus:ring-blue-500 focus:border-blue-500" required />
        </div>

        <div>
          <label for="phone" class="block text-gray-700 mb-2">Phone *</label>
          <input type="tel" name="phone" id="phone" placeholder="(555) 555-5555" class="w-full p-3 rounded bg-white border border-gray-300 focus:ring-blue-500 focus:border-blue-500" required pattern="\\(\\d{3}\\) \\d{3}-\\d{4}" />
        </div>

        <div>
          <label for="email" class="block text-gray-700 mb-2">Email *</label>
          <input type="email" name="email" id="email" placeholder="you@company.com" class="w-full p-3 rounded bg-white border border-gray-300 focus:ring-blue-500 focus:border-blue-500" required pattern="[a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,}$" />
        </div>

        <div>
          <label for="company-name" class="block text-gray-700 mb-2">Company Name *</label>
          <input type="text" name="company-name" id="company-name" placeholder="Your Company Name" class="w-full p-3 rounded bg-white border border-gray-300 focus:ring-blue-500 focus:border-blue-500" required />
        </div>
        
        <div>
          <label for="street-address" class="block text-gray-700 mb-2">Jobsite Street Address *</label>
          <input type="text" name="street-address" id="street-address" placeholder="123 Main St" class="w-full p-3 rounded bg-white border border-gray-300 focus:ring-blue-500 focus:border-blue-500" required />
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label for="city" class="block text-gray-700 mb-2">City *</label>
            <input type="text" name="city" id="city" placeholder="Anytown" class="w-full p-3 rounded bg-white border border-gray-300 focus:ring-blue-500 focus:border-blue-500" required />
          </div>
          <div>
            <label for="state" class="block text-gray-700 mb-2">State / Province *</label>
            <select name="state" id="state-us" class="w-full p-3 rounded bg-white border border-gray-300 focus:ring-blue-500 focus:border-blue-500" required>
              <option value="">Select State</option>
              <option value="Alabama">Alabama</option>
              <option value="Alaska">Alaska</option>
              <option value="Arizona">Arizona</option>
              <option value="Arkansas">Arkansas</option>
              <option value="California">California</option>
              <option value="Colorado">Colorado</option>
              <option value="Connecticut">Connecticut</option>
              <option value="Delaware">Delaware</option>
              <option value="Florida">Florida</option>
              <option value="Georgia">Georgia</option>
              <option value="Hawaii">Hawaii</option>
              <option value="Idaho">Idaho</option>
              <option value="Illinois">Illinois</option>
              <option value="Indiana">Indiana</option>
              <option value="Iowa">Iowa</option>
              <option value="Kansas">Kansas</option>
              <option value="Kentucky">Kentucky</option>
              <option value="Louisiana">Louisiana</option>
              <option value="Maine">Maine</option>
              <option value="Maryland">Maryland</option>
              <option value="Massachusetts">Massachusetts</option>
              <option value="Michigan">Michigan</option>
              <option value="Minnesota">Minnesota</option>
              <option value="Mississippi">Mississippi</option>
              <option value="Missouri">Missouri</option>
              <option value="Montana">Montana</option>
              <option value="Nebraska">Nebraska</option>
              <option value="Nevada">Nevada</option>
              <option value="New Hampshire">New Hampshire</option>
              <option value="New Jersey">New Jersey</option>
              <option value="New Mexico">New Mexico</option>
              <option value="New York">New York</option>
              <option value="North Carolina">North Carolina</option>
              <option value="North Dakota">North Dakota</option>
              <option value="Ohio">Ohio</option>
              <option value="Oklahoma">Oklahoma</option>
              <option value="Oregon">Oregon</option>
              <option value="Pennsylvania">Pennsylvania</option>
              <option value="Rhode Island">Rhode Island</option>
              <option value="South Carolina">South Carolina</option>
              <option value="South Dakota">South Dakota</option>
              <option value="Tennessee">Tennessee</option>
              <option value="Texas">Texas</option>
              <option value="Utah">Utah</option>
              <option value="Vermont">Vermont</option>
              <option value="Virginia">Virginia</option>
              <option value="Washington">Washington</option>
              <option value="West Virginia">West Virginia</option>
              <option value="Wisconsin">Wisconsin</option>
              <option value="Wyoming">Wyoming</option>
              <option value="District of Columbia">District of Columbia</option>
            </select>
            <select name="state" id="state-ca" class="w-full p-3 rounded bg-white border border-gray-300 focus:ring-blue-500 focus:border-blue-500 hidden" required>
              <option value="">Select Province</option>
              <option value="Alberta">Alberta</option>
              <option value="British Columbia">British Columbia</option>
              <option value="Manitoba">Manitoba</option>
              <option value="New Brunswick">New Brunswick</option>
              <option value="Newfoundland and Labrador">Newfoundland and Labrador</option>
              <option value="Northwest Territories">Northwest Territories</option>
              <option value="Nova Scotia">Nova Scotia</option>
              <option value="Nunavut">Nunavut</option>
              <option value="Ontario">Ontario</option>
              <option value="Prince Edward Island">Prince Edward Island</option>
              <option value="Quebec">Quebec</option>
              <option value="Saskatchewan">Saskatchewan</option>
              <option value="Yukon">Yukon</option>
            </select>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label for="country" class="block text-gray-700 mb-2">Country *</label>
            <select name="country" id="country" class="w-full p-3 rounded bg-white border border-gray-300 focus:ring-blue-500 focus:border-blue-500" required>
              <option value="USA">United States</option>
              <option value="Canada">Canada</option>
            </select>
          </div>
          <div>
            <label for="postal-code" class="block text-gray-700 mb-2">Postal Code *</label>
            <input type="text" name="postal-code" id="postal-code" placeholder="Postal Code" class="w-full p-3 rounded bg-white border border-gray-300 focus:ring-blue-500 focus:border-blue-500" required />
          </div>
        </div>
        
        
        <div>
          <button type="submit" class="w-full bg-[#0955A9] hover:bg-[#07448a] text-white font-bold py-4 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0955A9] focus:ring-opacity-50 transition-colors duration-300">
            Get My Quote
          </button>
        </div>
              </div>
      </form>
    </div>
  </main>
</Layout>

<script>
  const phoneInput = document.getElementById('phone');
  const countrySelect = document.getElementById('country');
  const stateUsSelect = document.getElementById('state-us');
  const stateCaSelect = document.getElementById('state-ca');

  // Phone formatting
  if (phoneInput) {
    phoneInput.addEventListener('input', (e) => {
      const target = e.target as HTMLInputElement;
      let input = target.value.replace(/\D/g, '').substring(0, 10);
      const areaCode = input.substring(0, 3);
      const middle = input.substring(3, 6);
      const last = input.substring(6, 10);

      if (input.length > 6) {
        target.value = `(${areaCode}) ${middle}-${last}`;
      } else if (input.length > 3) {
        target.value = `(${areaCode}) ${middle}`;
      } else if (input.length > 0) {
        target.value = `(${areaCode}`;
      }
    });
  }

  // Country selection handler
  if (countrySelect && stateUsSelect && stateCaSelect) {
    const countryEl = countrySelect as HTMLSelectElement;
    const stateUsEl = stateUsSelect as HTMLSelectElement;
    const stateCaEl = stateCaSelect as HTMLSelectElement;
    
    function updateStateDropdown() {
      const selectedCountry = countryEl.value;
      
      if (selectedCountry === 'USA') {
        stateUsEl.classList.remove('hidden');
        stateCaEl.classList.add('hidden');
        stateUsEl.required = true;
        stateCaEl.required = false;
        stateCaEl.value = ''; // Clear Canadian selection
      } else if (selectedCountry === 'Canada') {
        stateUsEl.classList.add('hidden');
        stateCaEl.classList.remove('hidden');
        stateCaEl.required = true;
        stateUsEl.required = false;
        stateUsEl.value = ''; // Clear US selection
      }
    }

    // Initialize on page load
    updateStateDropdown();

    // Update when country changes
    countryEl.addEventListener('change', updateStateDropdown);
  }
</script> 